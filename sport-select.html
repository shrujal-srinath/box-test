<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Select a Sport - BOX : By BMSCE</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="app-container homepage-container">
        <div class="container">

            <header class="homepage-header">
                <h1 class="main-title" id="sport-select-title">Select a Sport</h1>
                <p class="hero-subtitle" id="sport-select-subtitle">Choose an event to begin scoring.</p>
                <button id="signOutBtn" class="btn btn--outline hidden" style="margin-top: 16px;">Sign Out</button>
            </header>

            <div class="sport-selection">
                <div class="sport-selection-grid">

                    <a href="scoreboard.html?sport=basketball" class="sport-card-link">
                        <div class="card sport-card">
                            <div class="card__body">
                                <div class="card-icon">üèÄ</div>
                                <h3>Basketball</h3>
                                <p>Live scoreboard, stats, and shot clock management.</p>
                            </div>
                        </div>
                    </a>

                    <a href="scoreboard.html?sport=kabaddi" class="sport-card-link">
                        <div class="card sport-card">
                            <div class="card__body">
                                <div class="card-icon">üèÉ</div>
                                <h3>Kabaddi</h3>
                                <p>Raid timer, score, and all-out tracking.</p>
                            </div>
                        </div>
                    </a>
                    
                    <a href="scoreboard.html?sport=volleyball" class="sport-card-link">
                        <div class="card sport-card">
                            <div class="card__body">
                                <div class="card-icon">üèê</div>
                                <h3>Volleyball</h3>
                                <p>Point, set, and timeout tracking.</p>
                            </div>
                        </div>
                    </a>

                    <a href="scoreboard.html?sport=badminton" class="sport-card-link">
                        <div class="card sport-card">
                            <div class="card__body">
                                <div class="card-icon">üè∏</div>
                                <h3>Badminton</h3>
                                <p>Point, game, and match tracking.</p>
                            </div>
                        </div>
                    </a>
                    
                    <a href="scoreboard.html?sport=general" class="sport-card-link">
                        <div class="card sport-card">
                            <div class="card__body">
                                <div class="card-icon">üéØ</div>
                                <h3>General Points</h3>
                                <p>A simple +1 / -1 point system for any event.</p>
                            </div>
                        </div>
                    </a>

                </div>
            </div>

        </div>
    </div>
    
    <script type="module">
        import { auth } from './modules/firebase.js';

        const signOutBtn = document.getElementById('signOutBtn');
        const title = document.getElementById('sport-select-title');
        const subtitle = document.getElementById('sport-select-subtitle');

        // Check if the user is a logged-in host
        if (localStorage.getItem('userIsHost') === 'true') {
            auth.onAuthStateChanged(user => {
                if (user) {
                    // User is logged in
                    title.textContent = `Welcome, ${user.displayName || user.email.split('@')[0]}`;
                    subtitle.textContent = "Select a sport to host.";
                    signOutBtn.classList.remove('hidden');
                }
            });
        }

        signOutBtn.addEventListener('click', () => {
            auth.signOut().then(() => {
                localStorage.setItem('userIsHost', 'false');
                localStorage.setItem('userMode', 'guest');
                window.location.href = 'index.html';
            });
        });
    </script>
</body>
</html>